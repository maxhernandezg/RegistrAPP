"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{3485:(b,c,i)=>{i.r(c),i.d(c,{LoginPageModule:()=>R});var h=i(177),u=i(9417),r=i(4742),p=i(6432),m=i(9631),f=i(8834),v=i(9213),d=i(5559),L=i(467),o=i(4438),M=i(7783),P=i(671);const y=()=>["/reset-password"],C=[{path:"",component:(()=>{var n;class l{constructor(e,t,a,s){this.toastController=e,this.router=t,this.apiService=a,this.authService=s,this.login={username:"",password:""},this.hide=!0,this.field=""}ngOnInit(){}ingresar(){if(this.validateModel(this.login))return this.validateLongUsuario(this.login.username)?this.validateLongPass(this.login.password)?void this.apiService.login(this.login.username,this.login.password).subscribe({next:e=>this.handleLoginSuccess(e),error:e=>this.handleLoginError(e)}):(this.presentToast("La contrase\xf1a debe ser de largo 4 y solo num\xe9rica"),void(this.login.password="")):(this.presentToast("El largo del usuario debe ser entre 3 y 16 caracteres"),void(this.login.username=""));this.presentToast(`Falta: ${this.field}`)}handleLoginSuccess(e){console.log("Usuario autenticado:",e),this.presentToast(`Bienvenido ${e.fullName}`),this.authService.storeUser(e),this.authService.storeToken("auth-token"),"docente"===e.role?(console.log("Redirigiendo a docente-home"),this.router.navigate(["docente-home"])):"alumno"===e.role?(console.log("Redirigiendo a student-home"),this.router.navigate(["student-home"])):"admin"===e.role?(console.log("Redirigiendo a admin-home"),this.router.navigate(["admin-home"])):(console.log("Rol no permitido:",e.role),this.presentToast(`Rol no permitido: ${e.role}`))}handleLoginError(e){var t;const a=(null===(t=e.error)||void 0===t?void 0:t.message)||"Usuario o contrase\xf1a incorrectos";this.presentToast(a),this.login.password=""}validateModel(e){for(const[t,a]of Object.entries(e))if(""===a)return this.field=t,!1;return!0}validateLongUsuario(e){return e.length>=3&&e.length<=16}validateLongPass(e){return 4===e.length&&!isNaN(Number(e))}presentToast(e,t=2e3){var a=this;return(0,L.A)(function*(){(yield a.toastController.create({message:e,duration:t})).present()})()}}return(n=l).\u0275fac=function(e){return new(e||n)(o.rXU(r.K_),o.rXU(d.Ix),o.rXU(M.G),o.rXU(P.u))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-login"]],decls:20,vars:5,consts:[["color","light"],[1,"ion-padding-top",2,"display","flex","justify-content","center","align-items","center","width","100%"],["src","assets/logoregistrap.png",2,"width","300px","height","auto"],[1,"ion-padding-vertical","ion-text-center"],[2,"padding-top","30px","color","#833050"],[1,"form-container"],["label","Usuario","labelPlacement","stacked","placeholder","Ingresa tu usuario",2,"color","#833050",3,"ngModelChange","clearOnEdit","ngModel"],["label","Contrase\xf1a","labelPlacement","stacked","type","password","placeholder","Ingresa tu contrase\xf1a",2,"color","#833050",3,"ngModelChange","ngModel"],[1,"ion-text-center"],["color","secondary","shape","round",3,"click"],[2,"color","white","padding-top","12px"],["color","secondary","shape","round","fill","outline",3,"routerLink"]],template:function(e,t){1&e&&(o.j41(0,"ion-content",0)(1,"div",1),o.nrm(2,"ion-img",2),o.k0s(),o.j41(3,"div",3)(4,"p",4),o.EFF(5,"\xa1Qu\xe9 gusto tenerte de vuelta!"),o.k0s()(),o.j41(6,"div",5)(7,"ion-card-content")(8,"ion-list")(9,"ion-item")(10,"ion-input",6),o.mxI("ngModelChange",function(s){return o.DH7(t.login.username,s)||(t.login.username=s),s}),o.k0s()(),o.j41(11,"ion-item")(12,"ion-input",7),o.mxI("ngModelChange",function(s){return o.DH7(t.login.password,s)||(t.login.password=s),s}),o.k0s()()()(),o.j41(13,"div",8)(14,"ion-button",9),o.bIt("click",function(){return t.ingresar()}),o.j41(15,"p",10),o.EFF(16," Iniciar Sesi\xf3n"),o.k0s()()(),o.j41(17,"div",8)(18,"ion-button",11),o.EFF(19," \xbfOlvidaste tu contrase\xf1a? "),o.k0s()()()()),2&e&&(o.R7$(10),o.Y8G("clearOnEdit",!0),o.R50("ngModel",t.login.username),o.R7$(2),o.R50("ngModel",t.login.password),o.R7$(6),o.Y8G("routerLink",o.lJ4(4,y)))},dependencies:[u.BC,u.vS,r.Jm,r.I9,r.W9,r.KW,r.$w,r.uz,r.nf,r.Gw,r.N7,d.Wk],styles:['@charset "UTF-8";ion-button[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:500;margin-top:15px;width:100%;max-width:400px;--border-radius: 8px}ion-button[color=primary][_ngcontent-%COMP%]{--background: #007bff;--color: #fff}ion-button[fill=outline][_ngcontent-%COMP%]{--border-color: #007bff;--color: #007bff}']}),l})()}];let F=(()=>{var n;class l{}return(n=l).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[d.iI.forChild(C),d.iI]}),l})(),R=(()=>{var n;class l{}return(n=l).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[h.MD,u.YN,r.bv,F,p.RG,m.fS,f.Hl,v.m_]}),l})()}}]);